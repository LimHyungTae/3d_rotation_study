# 3D Rotation Decomposition Study

## Example Outputs (the numbers will be different)

```angular2html
----------------------------------------
[Eigen]  Roll: 0.916619, Pitch: -1.11678, Yaw: 0.52429
[Eigen]  Roll: 1.29984, Pitch: -0.0762302, Yaw: 1.18016
[OpenCV] Roll: 1.09269, Pitch: -0.813915, Yaw: 0.953083
[GTSAM]  Roll: 0.916619, Pitch: -1.11678, Yaw: 0.52429
[GTSAM]  Roll: 0.916619, Pitch: -1.11678, Yaw: 0.52429
[Ours]   Roll: 0.916619, Pitch: -1.11678, Yaw: 0.52429
----------------------------------------
----------------------------------------
[Eigen]  Roll: 0.676192, Pitch: 1.87551, Yaw: 2.25518
[Eigen]  Roll: 1.33457, Pitch: 3.12706, Yaw: -1.76165
[OpenCV] Roll: -1.47043, Pitch: 1.22775, Yaw: 0.949887
[GTSAM]  Roll: -2.4654, Pitch: 1.26608, Yaw: -0.886417
[GTSAM]  Roll: -2.4654, Pitch: 1.26608, Yaw: -0.886417
[Ours]   Roll: -2.4654, Pitch: 1.26608, Yaw: -0.886417
----------------------------------------
----------------------------------------
[Eigen]  Roll: -0.165668, Pitch: 0.108446, Yaw: 0.13827
[Eigen]  Roll: 2.96196, Pitch: 3.05849, Yaw: -2.98682
[OpenCV] Roll: -0.172739, Pitch: 0.0965931, Yaw: 0.146802
[GTSAM]  Roll: -0.165668, Pitch: 0.108446, Yaw: 0.13827
[GTSAM]  Roll: -0.165668, Pitch: 0.108446, Yaw: 0.13827
[Ours]   Roll: -0.165668, Pitch: 0.108446, Yaw: 0.13827
----------------------------------------
----------------------------------------
[Eigen]  Roll: -2.91913, Pitch: 2.46222, Yaw: 1.98467
[Eigen]  Roll: 0.708182, Pitch: 0.0444666, Yaw: -1.25226
[OpenCV] Roll: 0.58398, Pitch: 0.478271, Yaw: -1.18085
[GTSAM]  Roll: 0.222461, Pitch: 0.679375, Yaw: -1.15692
[GTSAM]  Roll: 0.222461, Pitch: 0.679375, Yaw: -1.15692
[Ours]   Roll: 0.222461, Pitch: 0.679375, Yaw: -1.15692
----------------------------------------
----------------------------------------
[Eigen]  Roll: -2.95361, Pitch: -3.01765, Yaw: 3.05486
[Eigen]  Roll: 0.17827, Pitch: -0.137615, Yaw: -0.0627147
[OpenCV] Roll: 0.182245, Pitch: -0.131632, Yaw: -0.0747167
[GTSAM]  Roll: 0.187979, Pitch: -0.123945, Yaw: -0.0867317
[GTSAM]  Roll: 0.187979, Pitch: -0.123945, Yaw: -0.0867317
[Ours]   Roll: 0.187979, Pitch: -0.123945, Yaw: -0.0867317
----------------------------------------
----------------------------------------
[Eigen]  Roll: -1.25587, Pitch: -0.340763, Yaw: 0.204595
[Eigen]  Roll: 1.88125, Pitch: -2.84262, Yaw: 2.87885
[OpenCV] Roll: -1.20378, Pitch: -0.419062, Yaw: -0.0378063
[GTSAM]  Roll: -1.25587, Pitch: -0.340763, Yaw: 0.204595
[GTSAM]  Roll: -1.25587, Pitch: -0.340763, Yaw: 0.204595
[Ours]   Roll: -1.25587, Pitch: -0.340763, Yaw: 0.204595
----------------------------------------
----------------------------------------
[Eigen]  Roll: 1.44461, Pitch: 0.766666, Yaw: 0.424297
[Eigen]  Roll: 1.46677, Pitch: 0.509763, Yaw: -0.719753
[OpenCV] Roll: 1.18871, Pitch: 0.887568, Yaw: -0.209468
[GTSAM]  Roll: 1.44461, Pitch: 0.766666, Yaw: 0.424297
[GTSAM]  Roll: 1.44461, Pitch: 0.766666, Yaw: 0.424297
[Ours]   Roll: 1.44461, Pitch: 0.766666, Yaw: 0.424297
----------------------------------------
----------------------------------------
[Eigen]  Roll: -3.13872, Pitch: 2.54813, Yaw: 0.65574
[Eigen]  Roll: 0.387876, Pitch: -0.46117, Yaw: -2.39458
[OpenCV] Roll: 0.733224, Pitch: 0.245566, Yaw: -2.39459
[GTSAM]  Roll: 0.00287387, Pitch: 0.59346, Yaw: -2.48585
[GTSAM]  Roll: 0.00287387, Pitch: 0.59346, Yaw: -2.48585
[Ours]   Roll: 0.00287387, Pitch: 0.59346, Yaw: -2.48585
----------------------------------------
----------------------------------------
[Eigen]  Roll: 2.80058, Pitch: 2.94395, Yaw: 2.93077
[Eigen]  Roll: 2.83916, Pitch: 2.88794, Yaw: 3.00377
[OpenCV] Roll: -0.317813, Pitch: 0.230687, Yaw: -0.174408
[GTSAM]  Roll: -0.341014, Pitch: 0.197647, Yaw: -0.210819
[GTSAM]  Roll: -0.341014, Pitch: 0.197647, Yaw: -0.210819
[Ours]   Roll: -0.341014, Pitch: 0.197647, Yaw: -0.210819
----------------------------------------
----------------------------------------
[Eigen]  Roll: -2.4009, Pitch: 1.22948, Yaw: 1.03062
[Eigen]  Roll: 2.35147, Pitch: -1.21214, Yaw: -1.05822
[OpenCV] Roll: 2.39326, Pitch: 0.605415, Yaw: -1.91812
[GTSAM]  Roll: -2.4009, Pitch: 1.22948, Yaw: 1.03062
[GTSAM]  Roll: -2.4009, Pitch: 1.22948, Yaw: 1.03062
[Ours]   Roll: -2.4009, Pitch: 1.22948, Yaw: 1.03062
----------------------------------------
```

---

## Interesting observation

```
// Given rotation matrix
R: [
        0.682115, 0.531373, -0.502357;
        -0.345114, 0.839599, 0.419488;
        0.644683, -0.112768, 0.756087
]
----------------------------------------
// Decomposed angles
[Eigen]  Roll: 2.99354, Pitch: -2.44098, Yaw: 2.6732       // <- zyx
[Eigen]  Roll: 2.63506, Pitch: -2.61527, Yaw: 2.47978      // <- xyz
[OpenCV] Roll: -0.303641, Pitch: -0.654363, Yaw: -0.500018
[GTSAM]  Roll: -0.148056, Pitch: -0.700608, Yaw: -0.468394
[GTSAM]  Roll: -0.148056, Pitch: -0.700608, Yaw: -0.468394 // <- zyx
[Ours]   Roll: -0.148056, Pitch: -0.700608, Yaw: -0.468394 // <- zyx
```

When I generated a rotation matrix using the roll-pitch-yaw angles above:

### Eigen with `XYZ` style

![a](materials/rotation_eigen_xyz.png)


### Eigen with `ZYX` style

![b](materials/rotation_eigen_zyx.png)

### From `R2ypr` function (follow `ZYX` format)

![c](materials/rotation_ours_zyx.png)

**Eigen** has larger numerical error! (0.0000025 vs 0.0000002)
